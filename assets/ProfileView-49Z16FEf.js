import{d as V,_ as h,c as u,o as i,w as s,a as o,V as P,b as n,t as y,e as b,f as a,g as R,h as $,i as S,r as D,j as v,k as w,F as N,l as U,m as q,n as A,p as B,q as j,s as G,u as W,v as J,x as K,y as Q,z as Y,A as k,B as c,C as X,D as Z,E as _,G as x,H as ee,I as te,J as re,K as oe,L as se,M as ie,N as ae,O as ne,P as le,Q as de,R as pe}from"./index-BMk5XanW.js";import{f as I,V as M,a as F}from"./VTextField-ClJQclJv.js";import{V as ue,a as me,b as fe}from"./VSelect-bov1_OvQ.js";const ye=["HOTEL","APARTMENT","HOUSE","ROOM"],ve=V({name:"PropertyCard",props:{property:{type:Object,required:!0}},emits:["edit","delete"]}),ge={class:"text-body2"},$e={class:"mt-3"},Ve={class:"font-weight-medium"},he={class:"text-caption text-medium-emphasis"};function De(e,t,m,f,p,g){return i(),u(S,null,{default:s(()=>[o(P,null,{default:s(()=>[n(y(e.property.name),1)]),_:1}),o(b,null,{default:s(()=>[a("div",ge,y(e.property.description),1),a("div",$e,[a("div",Ve,y(e.property.priceFerNightCents)+"₴/night",1),a("div",he,y(e.property.category),1)])]),_:1}),o(R,null,{default:s(()=>[o($,{size:"small",color:"primary",onClick:t[0]||(t[0]=r=>e.$emit("edit",e.property))},{default:s(()=>[...t[2]||(t[2]=[n("Edit",-1)])]),_:1}),o($,{size:"small",color:"error",onClick:t[1]||(t[1]=r=>e.$emit("delete",e.property.id))},{default:s(()=>[...t[3]||(t[3]=[n("Delete",-1)])]),_:1})]),_:1})]),_:1})}const Fe=h(ve,[["render",De]]),Ce=V({name:"PropertyList",components:{PropertyCard:Fe},props:{properties:{type:Array,required:!0},isLoading:{type:Boolean,default:!1},emptyMessage:{type:String,default:""}},emits:["edit","delete"],computed:{isEmpty(){return this.properties.length===0}}}),Ee={key:0,class:"text-center text-medium-emphasis py-8"},Pe={key:0,class:"text-sm mt-2"};function be(e,t,m,f,p,g){const r=D("PropertyCard");return i(),v("div",null,[e.isEmpty&&!e.isLoading?(i(),v("div",Ee,[t[2]||(t[2]=a("p",null,"No properties found.",-1)),e.emptyMessage?(i(),v("p",Pe,y(e.emptyMessage),1)):w("",!0)])):e.isLoading?(i(),u(B,{key:1,indeterminate:"",color:"primary",class:"mx-auto"})):(i(),u(A,{key:2},{default:s(()=>[(i(!0),v(N,null,U(e.properties,l=>(i(),u(q,{key:l.id,cols:"12",md:"6",lg:"4"},{default:s(()=>[o(r,{property:l,onEdit:t[0]||(t[0]=d=>e.$emit("edit",d)),onDelete:t[1]||(t[1]=d=>e.$emit("delete",d))},null,8,["property"])]),_:2},1024))),128))]),_:1}))])}const Re=h(Ce,[["render",be]]),Se=V({name:"PropertyForm",props:{open:{type:Boolean,required:!0},property:{type:Object,default:null},propertyCategories:{type:Array,required:!0}},emits:["update:open","submit"],data(){return{formValid:!1,form:{name:"",description:"",priceFerNightCents:"",category:null},formRules:I}},computed:{isOpen:{get(){return this.open},set(e){this.$emit("update:open",e)}},isEditMode(){return!!this.property}},watch:{property(e){e&&this.populateForm(e)},open(e){e||this.resetForm()}},methods:{populateForm(e){this.form={name:e.name,description:e.description,priceFerNightCents:e.priceFerNightCents.toString(),category:e.category}},handleSubmit(){this.formValid&&(this.$emit("submit",{...this.form,priceFerNightCents:Number(this.form.priceFerNightCents)}),this.resetForm())},resetForm(){this.form={name:"",description:"",priceFerNightCents:"",category:null},this.formValid=!1}}}),Le=G({fullscreen:Boolean,scrollable:Boolean,...Z(_({captureFocus:!0,origin:"center center",scrollStrategy:"block",transition:{component:ue},zIndex:2400,retainFocus:!0}),["disableInitialFocus"])},"VDialog"),H=j()({name:"VDialog",props:Le(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,t){let{emit:m,slots:f}=t;const p=W(e,"modelValue"),{scopeId:g}=J(),r=K();function l(){m("afterEnter"),(e.scrim||e.retainFocus)&&r.value?.contentEl&&!r.value.contentEl.contains(document.activeElement)&&r.value.contentEl.focus({preventScroll:!0})}function d(){m("afterLeave")}return Q(p,async L=>{L||(await x(),r.value.activatorEl?.focus({preventScroll:!0}))}),Y(()=>{const L=k.filterProps(e),T=c({"aria-haspopup":"dialog"},e.activatorProps),z=c({tabindex:-1},e.contentProps);return o(k,c({ref:r,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},L,{modelValue:p.value,"onUpdate:modelValue":C=>p.value=C,"aria-modal":"true",activatorProps:T,contentProps:z,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:l,onAfterLeave:d},g),{activator:f.activator,default:function(){for(var C=arguments.length,O=new Array(C),E=0;E<C;E++)O[E]=arguments[E];return o(ee,{root:"VDialog"},{default:()=>[f.default?.(...O)]})}})}),X({},r)}});function ce(e,t,m,f,p,g){return i(),u(H,{modelValue:e.isOpen,"onUpdate:modelValue":[t[6]||(t[6]=r=>e.isOpen=r),t[7]||(t[7]=r=>e.$emit("update:open",r))],"max-width":"400"},{default:s(()=>[o(S,null,{default:s(()=>[o(P,null,{default:s(()=>[n(y(e.isEditMode?"Edit Property":"Create Property"),1)]),_:1}),o(b,null,{default:s(()=>[o(M,{modelValue:e.formValid,"onUpdate:modelValue":t[4]||(t[4]=r=>e.formValid=r)},{default:s(()=>[o(F,{modelValue:e.form.name,"onUpdate:modelValue":t[0]||(t[0]=r=>e.form.name=r),label:"Name",required:"",rules:[e.formRules.required("Name"),e.formRules.propertyName]},null,8,["modelValue","rules"]),o(F,{modelValue:e.form.description,"onUpdate:modelValue":t[1]||(t[1]=r=>e.form.description=r),label:"Description",required:"",rules:[e.formRules.required("Description"),e.formRules.propertyDescription]},null,8,["modelValue","rules"]),o(F,{modelValue:e.form.priceFerNightCents,"onUpdate:modelValue":t[2]||(t[2]=r=>e.form.priceFerNightCents=r),label:"Price (₴)",type:"number",required:"",rules:[e.formRules.required("Price"),e.formRules.price]},null,8,["modelValue","rules"]),o(me,{modelValue:e.form.category,"onUpdate:modelValue":t[3]||(t[3]=r=>e.form.category=r),items:e.propertyCategories,label:"Category",required:"",rules:[e.formRules.required("Category")]},null,8,["modelValue","items","rules"])]),_:1},8,["modelValue"])]),_:1}),o(R,null,{default:s(()=>[o($,{variant:"text",onClick:t[5]||(t[5]=r=>e.$emit("update:open",!1))},{default:s(()=>[...t[8]||(t[8]=[n("Cancel",-1)])]),_:1}),o($,{color:"primary",onClick:e.handleSubmit,disabled:!e.formValid},{default:s(()=>[n(y(e.isEditMode?"Save":"Create"),1)]),_:1},8,["onClick","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const Oe=h(Se,[["render",ce]]),ke=V({name:"HostDashboard",components:{PropertyList:Re,PropertyForm:Oe},props:{properties:{type:Array,required:!0},propertyCategories:{type:Array,required:!0}},emits:["property-updated"],data(){return{isLoading:!1,propertyFormOpen:!1,propertyFormEdit:null}},methods:{openCreateProperty(){this.propertyFormEdit=null,this.propertyFormOpen=!0},openEditProperty(e){this.propertyFormEdit=e,this.propertyFormOpen=!0},async deleteProperty(e){this.isLoading=!0;try{await oe(e),this.$emit("property-updated")}finally{this.isLoading=!1}},async handlePropertyFormSubmit(e){this.isLoading=!0;try{this.propertyFormEdit?await te(this.propertyFormEdit.id,e):await re(e),this.propertyFormOpen=!1,this.propertyFormEdit=null,this.$emit("property-updated")}finally{this.isLoading=!1}}}}),we={class:"mb-6"};function Ne(e,t,m,f,p,g){const r=D("PropertyList"),l=D("PropertyForm");return i(),v("div",null,[a("div",we,[o($,{color:"primary",size:"large",onClick:e.openCreateProperty},{default:s(()=>[o(se,{start:""},{default:s(()=>[...t[1]||(t[1]=[n("mdi-plus",-1)])]),_:1}),t[2]||(t[2]=n(" Create Property ",-1))]),_:1},8,["onClick"])]),o(r,{properties:e.properties,"is-loading":e.isLoading,onEdit:e.openEditProperty,onDelete:e.deleteProperty},null,8,["properties","is-loading","onEdit","onDelete"]),o(l,{open:e.propertyFormOpen,property:e.propertyFormEdit,"property-categories":e.propertyCategories,"onUpdate:open":t[0]||(t[0]=d=>e.propertyFormOpen=d),onSubmit:e.handlePropertyFormSubmit},null,8,["open","property","property-categories","onSubmit"])])}const Ue=h(ke,[["render",Ne]]),qe=V({name:"ReservationCard",props:{reservation:{type:Object,required:!0}},emits:["edit","delete"],methods:{formatDate(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},getStatusColor(e){return{PENDING:"warning",CONFIRMED:"success",CANCELED:"error",COMPLETED:"info"}[e]||"default"}}}),Ae={class:"space-y-2"},Be={class:"font-weight-medium"},Ie={class:"font-weight-medium"};function Me(e,t,m,f,p,g){return i(),u(S,null,{default:s(()=>[o(P,null,{default:s(()=>[...t[2]||(t[2]=[n("Reservation",-1)])]),_:1}),o(b,null,{default:s(()=>[a("div",Ae,[a("div",null,[t[3]||(t[3]=a("span",{class:"text-caption text-medium-emphasis"},"Start Date",-1)),a("div",Be,y(e.formatDate(e.reservation.startDate)),1)]),a("div",null,[t[4]||(t[4]=a("span",{class:"text-caption text-medium-emphasis"},"End Date",-1)),a("div",Ie,y(e.formatDate(e.reservation.endDate)),1)]),a("div",null,[t[5]||(t[5]=a("span",{class:"text-caption text-medium-emphasis"},"Status",-1)),o(fe,{size:"small",class:"mt-1",color:e.getStatusColor(e.reservation.status)},{default:s(()=>[n(y(e.reservation.status),1)]),_:1},8,["color"])])])]),_:1}),o(R,null,{default:s(()=>[o($,{size:"small",color:"primary",onClick:t[0]||(t[0]=r=>e.$emit("edit",e.reservation))},{default:s(()=>[...t[6]||(t[6]=[n("Edit",-1)])]),_:1}),o($,{size:"small",color:"error",onClick:t[1]||(t[1]=r=>e.$emit("delete",e.reservation.id))},{default:s(()=>[...t[7]||(t[7]=[n("Delete",-1)])]),_:1})]),_:1})]),_:1})}const He=h(qe,[["render",Me]]),Te=V({name:"ReservationList",components:{ReservationCard:He},props:{reservations:{type:Array,required:!0},isLoading:{type:Boolean,default:!1},emptyMessage:{type:String,default:""}},emits:["edit","delete"],computed:{isEmpty(){return this.reservations.length===0}}}),ze={key:0,class:"text-center text-medium-emphasis py-8"},je={key:0,class:"text-sm mt-2"};function Ge(e,t,m,f,p,g){const r=D("ReservationCard");return i(),v("div",null,[e.isEmpty&&!e.isLoading?(i(),v("div",ze,[t[2]||(t[2]=a("p",null,"No reservations found.",-1)),e.emptyMessage?(i(),v("p",je,y(e.emptyMessage),1)):w("",!0)])):e.isLoading?(i(),u(B,{key:1,indeterminate:"",color:"primary",class:"mx-auto"})):(i(),u(A,{key:2},{default:s(()=>[(i(!0),v(N,null,U(e.reservations,l=>(i(),u(q,{key:l.id,cols:"12",md:"6",lg:"4"},{default:s(()=>[o(r,{reservation:l,onEdit:t[0]||(t[0]=d=>e.$emit("edit",d)),onDelete:t[1]||(t[1]=d=>e.$emit("delete",d))},null,8,["reservation"])]),_:2},1024))),128))]),_:1}))])}const We=h(Te,[["render",Ge]]),Je=V({name:"ReservationForm",props:{open:{type:Boolean,required:!0},reservation:{type:Object,default:null}},emits:["update:open","submit"],data(){return{formValid:!1,form:{startDate:"",endDate:""},formRules:I}},computed:{isOpen:{get(){return this.open},set(e){this.$emit("update:open",e)}}},watch:{reservation(e){e&&this.populateForm(e)},open(e){e||this.resetForm()}},methods:{populateForm(e){this.form={startDate:e.startDate,endDate:e.endDate}},handleSubmit(){this.formValid&&(this.$emit("submit",{...this.form}),this.resetForm())},resetForm(){this.form={startDate:"",endDate:""},this.formValid=!1}}});function Ke(e,t,m,f,p,g){return i(),u(H,{modelValue:e.isOpen,"onUpdate:modelValue":[t[4]||(t[4]=r=>e.isOpen=r),t[5]||(t[5]=r=>e.$emit("update:open",r))],"max-width":"400"},{default:s(()=>[o(S,null,{default:s(()=>[o(P,null,{default:s(()=>[...t[6]||(t[6]=[n("Edit Reservation",-1)])]),_:1}),o(b,null,{default:s(()=>[o(M,{modelValue:e.formValid,"onUpdate:modelValue":t[2]||(t[2]=r=>e.formValid=r)},{default:s(()=>[o(F,{modelValue:e.form.startDate,"onUpdate:modelValue":t[0]||(t[0]=r=>e.form.startDate=r),label:"Start Date",type:"date",required:"",rules:[e.formRules.date]},null,8,["modelValue","rules"]),o(F,{modelValue:e.form.endDate,"onUpdate:modelValue":t[1]||(t[1]=r=>e.form.endDate=r),label:"End Date",type:"date",required:"",rules:[e.formRules.date,e.formRules.endDateAfterStart(e.form.startDate)]},null,8,["modelValue","rules"])]),_:1},8,["modelValue"])]),_:1}),o(R,null,{default:s(()=>[o($,{variant:"text",onClick:t[3]||(t[3]=r=>e.$emit("update:open",!1))},{default:s(()=>[...t[7]||(t[7]=[n("Cancel",-1)])]),_:1}),o($,{color:"primary",onClick:e.handleSubmit,disabled:!e.formValid},{default:s(()=>[...t[8]||(t[8]=[n("Save",-1)])]),_:1},8,["onClick","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const Qe=h(Je,[["render",Ke]]),Ye=V({name:"UserDashboard",components:{ReservationList:We,ReservationForm:Qe},props:{reservations:{type:Array,required:!0}},emits:["reservation-updated"],data(){return{isLoading:!1,reservationFormOpen:!1,reservationFormEdit:null}},methods:{openEditReservation(e){this.reservationFormEdit=e,this.reservationFormOpen=!0},async deleteReservation(e){this.isLoading=!0;try{await ae(e),this.$emit("reservation-updated")}finally{this.isLoading=!1}},async handleReservationFormSubmit(e){this.isLoading=!0;try{this.reservationFormEdit&&await ie(this.reservationFormEdit.id,{startDate:new Date(e.startDate).toISOString(),endDate:new Date(e.endDate).toISOString()}),this.reservationFormOpen=!1,this.reservationFormEdit=null,this.$emit("reservation-updated")}finally{this.isLoading=!1}}}});function Xe(e,t,m,f,p,g){const r=D("ReservationList"),l=D("ReservationForm");return i(),v("div",null,[o(r,{reservations:e.reservations,"is-loading":e.isLoading,onEdit:e.openEditReservation,onDelete:e.deleteReservation},null,8,["reservations","is-loading","onEdit","onDelete"]),o(l,{open:e.reservationFormOpen,reservation:e.reservationFormEdit,"onUpdate:open":t[0]||(t[0]=d=>e.reservationFormOpen=d),onSubmit:e.handleReservationFormSubmit},null,8,["open","reservation","onSubmit"])])}const Ze=h(Ye,[["render",Xe]]),_e=V({name:"ProfileView",components:{HostDashboard:Ue,UserDashboard:Ze},data(){return{properties:[],reservations:[],isLoading:!1}},computed:{...ne(pe,["id","role"]),isHost(){return this.role==="HOST"},propertyCategories(){return[...ye]}},methods:{async fetchData(){this.isLoading=!0;try{if(this.isHost){const e=await le();this.properties=e}else{const e=await de();this.reservations=e}}finally{this.isLoading=!1}}},mounted(){this.fetchData()}}),xe={class:"pa-6"};function et(e,t,m,f,p,g){const r=D("HostDashboard"),l=D("UserDashboard");return i(),v("main",xe,[t[0]||(t[0]=a("h1",{class:"mb-6"},"Profile",-1)),e.isHost?(i(),u(r,{key:0,properties:e.properties,"property-categories":e.propertyCategories,onPropertyUpdated:e.fetchData},null,8,["properties","property-categories","onPropertyUpdated"])):(i(),u(l,{key:1,reservations:e.reservations,onReservationUpdated:e.fetchData},null,8,["reservations","onReservationUpdated"]))])}const st=h(_e,[["render",et]]);export{st as default};
